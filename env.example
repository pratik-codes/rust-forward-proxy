# Rust Forward Proxy Environment Configuration

# Proxy server configuration
PROXY_LISTEN_ADDR=127.0.0.1:8080
PROXY_REQUEST_TIMEOUT=30
PROXY_MAX_BODY_SIZE=1048576

# TLS/HTTPS Configuration
TLS_ENABLED=true
HTTPS_LISTEN_ADDR=127.0.0.1:8443
TLS_CERT_PATH=certs/proxy.crt
TLS_KEY_PATH=certs/proxy.key
TLS_AUTO_GENERATE_CERT=false
TLS_INTERCEPTION_ENABLED=true
TLS_CERT_ORGANIZATION="Rust Forward Proxy"
TLS_CERT_COMMON_NAME=proxy.local
TLS_CERT_VALIDITY_DAYS=365
TLS_MIN_TLS_VERSION=1.2
TLS_SKIP_UPSTREAM_CERT_VERIFY=false
TLS_ROOT_CA_CERT_PATH=ca-certs/securly_ca.crt
TLS_CA_CERT_PATH=ca-certs/rootCA.crt
TLS_CA_KEY_PATH=ca-certs/rootCA.key

# Upstream server configuration  
UPSTREAM_URL=http://localhost:3000
UPSTREAM_CONNECT_TIMEOUT=5
UPSTREAM_KEEP_ALIVE_TIMEOUT=60

# Redis configuration
REDIS_URL=redis://redis:6379

# Logging configuration
RUST_LOG=info
# Set to false for production to disable file logging and eliminate I/O overhead
PROXY_ENABLE_FILE_LOGGING=true

# HTTP Client Connection Pooling Configuration
PROXY_MAX_IDLE_PER_HOST=50
PROXY_IDLE_TIMEOUT_SECS=90
PROXY_CONNECT_TIMEOUT_SECS=10

# HTTP/2 Optimization Configuration
PROXY_HTTP2_STREAM_WINDOW_SIZE=2097152
PROXY_HTTP2_CONNECTION_WINDOW_SIZE=8388608
PROXY_HTTP2_KEEPALIVE_INTERVAL_SECS=30
PROXY_HTTP2_KEEPALIVE_TIMEOUT_SECS=10
PROXY_HTTP2_MAX_CONCURRENT_STREAMS=100

# TCP Optimization Configuration
PROXY_TCP_KEEPALIVE=true
PROXY_TCP_KEEPALIVE_INTERVAL_SECS=30

# Response Streaming Configuration  
PROXY_MAX_LOG_BODY_SIZE=1048576
PROXY_MAX_PARTIAL_LOG_SIZE=1024
PROXY_ENABLE_RESPONSE_STREAMING=true
PROXY_ENABLE_REQUEST_STREAMING=false

# Additional Redis settings
REDIS_POOL_SIZE=10
REDIS_CONNECTION_TIMEOUT=5
REDIS_COMMAND_TIMEOUT=10